<!DOCTYPE html>
<html>
  <head>
    <script>
      var HOST = 'wss://' + location.host;
      var ws = new WebSocket(HOST);
      var el;

      ws.onmessage = function (e) {
        const msg = JSON.parse(e.data);
        //console.log('onMessage', typeof msg);
        switch (msg.type) {
          case 'ping':
            const el = document.getElementById('server-time');
            el.innerHTML = 'Server time: ' + msg.data;
          default:
            break;
        }
      };
    </script>
  </head>
  <body>
    <h1 id="server-time"></h1>
  </body>
</html>
